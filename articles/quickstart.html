<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Start with CDER • cder</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Quick Start with CDER">
<meta property="og:description" content="cder">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/quickstart.html">Quick Start with CDER</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mkoohafkan/cder/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="quickstart_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick Start with CDER</h1>
                        <h4 data-toc-skip class="author">Michael Koohafkan</h4>
            
            <h4 data-toc-skip class="date">2023-02-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mkoohafkan/cder/blob/HEAD/vignettes/quickstart.rmd" class="external-link"><code>vignettes/quickstart.rmd</code></a></small>
      <div class="hidden name"><code>quickstart.rmd</code></div>

    </div>

    
    
<p>The R package <code>cder</code> provides a simple interface to the CDEC Webservice. Getting CDEC data with <code>cder</code> is easy, just pass a station code to <code><a href="../reference/cdec_query.html">cdec_query()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get data for CDEC station NSL</span></span>
<span><span class="fu"><a href="../reference/cdec_query.html">cdec_query</a></span><span class="op">(</span><span class="st">"NSL"</span><span class="op">)</span></span></code></pre></div>
<p>The CDEC web service uses some default values for the duration code, sensor number, and start/end dates. However, these default values vary from station to station, and sometimes a station will return no data by default. It’s generally a good idea to specify these yourself:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">station</span> <span class="op">=</span> <span class="st">"NSL"</span></span>
<span><span class="va">duration</span> <span class="op">=</span> <span class="st">"event"</span> <span class="co"># or "E"</span></span>
<span><span class="va">sensor</span> <span class="op">=</span> <span class="fl">100</span> <span class="co"># electrical conductivity</span></span>
<span><span class="va">start.date</span> <span class="op">=</span> <span class="st">"2023-01-01"</span></span>
<span><span class="va">end.date</span> <span class="op">=</span> <span class="st">"2023-01-05"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/cdec_query.html">cdec_query</a></span><span class="op">(</span><span class="va">station</span>, <span class="va">sensor</span>, <span class="va">duration</span>, <span class="va">start.date</span>, <span class="va">end.date</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 385 × 9</span></span>
<span><span class="co">#&gt;    Stati…¹ Durat…² Senso…³ Senso…⁴ DateTime            ObsDate             Value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 NSL     E           100 EL COND 2023-01-01 00:00:00 2023-01-01 00:00:00  6015</span></span>
<span><span class="co">#&gt;  2 NSL     E           100 EL COND 2023-01-01 00:15:00 2023-01-01 00:15:00  6019</span></span>
<span><span class="co">#&gt;  3 NSL     E           100 EL COND 2023-01-01 00:30:00 2023-01-01 00:30:00  6075</span></span>
<span><span class="co">#&gt;  4 NSL     E           100 EL COND 2023-01-01 00:45:00 2023-01-01 00:45:00  6151</span></span>
<span><span class="co">#&gt;  5 NSL     E           100 EL COND 2023-01-01 01:00:00 2023-01-01 01:00:00  6283</span></span>
<span><span class="co">#&gt;  6 NSL     E           100 EL COND 2023-01-01 01:15:00 2023-01-01 01:15:00  6310</span></span>
<span><span class="co">#&gt;  7 NSL     E           100 EL COND 2023-01-01 01:30:00 2023-01-01 01:30:00  6360</span></span>
<span><span class="co">#&gt;  8 NSL     E           100 EL COND 2023-01-01 01:45:00 2023-01-01 01:45:00  6408</span></span>
<span><span class="co">#&gt;  9 NSL     E           100 EL COND 2023-01-01 02:00:00 2023-01-01 02:00:00  6425</span></span>
<span><span class="co">#&gt; 10 NSL     E           100 EL COND 2023-01-01 02:15:00 2023-01-01 02:15:00  6444</span></span>
<span><span class="co">#&gt; # … with 375 more rows, 2 more variables: DataFlag &lt;chr&gt;, SensorUnits &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   and abbreviated variable names ¹​StationID, ²​Duration, ³​SensorNumber,</span></span>
<span><span class="co">#&gt; #   ⁴​SensorType</span></span></code></pre></div>
<p>The web service supports multiple stations and sensors:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get data for CDEC stations NSL and HUN</span></span>
<span><span class="va">stations</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NSL"</span>, <span class="st">"HUN"</span><span class="op">)</span></span>
<span><span class="co"># get electrical conductivity and stage</span></span>
<span><span class="va">sensors</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">start.date</span> <span class="op">=</span> <span class="st">"2023-01-01"</span></span>
<span><span class="va">end.date</span> <span class="op">=</span> <span class="st">"2023-01-05"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/cdec_query.html">cdec_query</a></span><span class="op">(</span><span class="va">stations</span>, <span class="va">sensors</span>, <span class="st">"hourly"</span>, <span class="va">start.date</span>, <span class="va">end.date</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 388 × 9</span></span>
<span><span class="co">#&gt;    Stati…¹ Durat…² Senso…³ Senso…⁴ DateTime            ObsDate             Value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 NSL     H           100 EL COND 2023-01-01 00:00:00 2023-01-01 00:00:00  6015</span></span>
<span><span class="co">#&gt;  2 NSL     H           100 EL COND 2023-01-01 01:00:00 2023-01-01 01:00:00  6283</span></span>
<span><span class="co">#&gt;  3 NSL     H           100 EL COND 2023-01-01 02:00:00 2023-01-01 02:00:00  6425</span></span>
<span><span class="co">#&gt;  4 NSL     H           100 EL COND 2023-01-01 03:00:00 2023-01-01 03:00:00  6471</span></span>
<span><span class="co">#&gt;  5 NSL     H           100 EL COND 2023-01-01 04:00:00 2023-01-01 04:00:00  6230</span></span>
<span><span class="co">#&gt;  6 NSL     H           100 EL COND 2023-01-01 05:00:00 2023-01-01 05:00:00  5925</span></span>
<span><span class="co">#&gt;  7 NSL     H           100 EL COND 2023-01-01 06:00:00 2023-01-01 06:00:00  4668</span></span>
<span><span class="co">#&gt;  8 NSL     H           100 EL COND 2023-01-01 07:00:00 2023-01-01 07:00:00  3991</span></span>
<span><span class="co">#&gt;  9 NSL     H           100 EL COND 2023-01-01 08:00:00 2023-01-01 08:00:00  3700</span></span>
<span><span class="co">#&gt; 10 NSL     H           100 EL COND 2023-01-01 09:00:00 2023-01-01 09:00:00  4757</span></span>
<span><span class="co">#&gt; # … with 378 more rows, 2 more variables: DataFlag &lt;chr&gt;, SensorUnits &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   and abbreviated variable names ¹​StationID, ²​Duration, ³​SensorNumber,</span></span>
<span><span class="co">#&gt; #   ⁴​SensorType</span></span></code></pre></div>
<p>Certain CDEC stations may store non-numeric data flags in the Value column instead of in the DataFlag column, resulting in parsing issues. For example, flow data at SGN (Sugar Creek near Callahan) will sometimes use the codes “ART” and “BRT” to signify discharge at stages above or below the available rating table. <code>cder</code> reexports <code><a href="https://readr.tidyverse.org/reference/problems.html" class="external-link">readr::problems()</a></code> to allow you to view these parsing problems, and additionally writes the problematic rows to a temporary file to facilitate further investigation.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sgn</span> <span class="op">=</span> <span class="fu"><a href="../reference/cdec_query.html">cdec_query</a></span><span class="op">(</span><span class="st">'SGN'</span>, <span class="fl">20</span>, start.date <span class="op">=</span> <span class="st">"2022-07-02"</span>,</span>
<span>  end.date <span class="op">=</span> <span class="st">"2022-07-03"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/problems.html" class="external-link">problems</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>That’s it! The CDEC Webservice currently does not support querying station metadata. To browse station data, use the <a href="http://cdec.water.ca.gov/dynamicapp/staSearch" class="external-link">Station Search tool</a> or <a href="https://cdec.water.ca.gov/webgis/?appid=cdecstation" class="external-link">Locator Map</a>. These URLs can also be accessed by calling <code><a href="../reference/cdec-search.html">cdec_search_stations()</a></code> and <code><a href="../reference/cdec-search.html">cdec_map()</a></code>, respectively. See <code><a href="../reference/cdec-search.html">help("cdec-search")</a></code> for more information.To access the metadata page for a particular station, use <code><a href="../reference/cdec_meta.html">cdec_meta()</a></code>.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Koohafkan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
